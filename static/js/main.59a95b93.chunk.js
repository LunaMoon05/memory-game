(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{23:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){},26:function(e,t,c){},28:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(11),s=c.n(r),i=(c(23),c(16)),l=(c(24),c(2)),u=c(12),o=c(13),d=c(5),h=c(18),j=c(17),b=(c(25),c(26),c(1)),f=function(e){var t=e.clickHandler,c=e.checked,a=e.id;return Object(b.jsx)("div",{onClick:t,id:a,"data-checked":"".concat(c),className:"square__item"})};function m(e){return e.map((function(e){return[Math.random(),e]})).sort().map((function(e){return e[1]}))}var O=function(e){Object(h.a)(c,e);var t=Object(j.a)(c);function c(e){var a;return Object(u.a)(this,c),(a=t.call(this,e)).state={level:localStorage.getItem("level")?Number(localStorage.getItem("level")):2,record:localStorage.getItem("record")?Number(localStorage.getItem("record")):0,isGuessing:!1,attempts:0,difficult:0,squaresArr:[]},a.activeSquaresLength=0,a.handleClick=a.handleClick.bind(Object(d.a)(a)),a}return Object(o.a)(c,[{key:"initArr",value:function(){for(var e=this,t=this.state,c=t.level,a=t.difficult,n=c*c,r=[],s=0;s<n;s++)r.push({id:s+1,guessed:!1,checked:null});r=m(r),this.activeSquaresLength=Math.sqrt(r.length)-1+a;for(var i=0;i<this.activeSquaresLength;i++)r[i].guessed=!0;var u=(r=m(r)).map((function(e){return e.guessed?Object(l.a)(Object(l.a)({},e),{},{checked:"visible"}):e}));this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{isGuessing:!0,squaresArr:u})})),setTimeout((function(){e.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{isGuessing:!1,squaresArr:r})}))}),2e3)}},{key:"componentDidMount",value:function(){this.initArr()}},{key:"handleClick",value:function(e){var t=this,c=this.state,a=c.squaresArr;if(!c.isGuessing){var n=a.map((function(t){var c=t.guessed;return t.id==e.target.id?Object(l.a)(Object(l.a)({},t),{},{checked:c}):t}));this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{squaresArr:n})}));n.filter((function(e){if(e.guessed&&!0===e.checked)return e})).length==this.activeSquaresLength&&(this.changeDifficultAndLevel(!0),setTimeout((function(){t.initArr()}),500)),a.forEach((function(c){c.id==e.target.id&&(c.guessed||(t.changeDifficultAndLevel(!1),setTimeout((function(){t.initArr()}),500)))}))}}},{key:"changeDifficultAndLevel",value:function(e){var t=this.state,c=t.difficult,a=t.attempts,n=t.record,r=t.level;e?c+1>=3?(this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{level:r+1,difficult:0})})),r+1>n&&(this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{record:r})})),localStorage.setItem("record",n+1)),localStorage.setItem("level",r+1),a<3&&this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{attempts:a+1})}))):this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{difficult:c+1})})):a<1?c<=0?r>2&&(this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{level:r-1,difficult:0})})),localStorage.setItem("level",r-1)):this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{difficult:c-1})})):this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{attempts:a-1})}))}},{key:"render",value:function(){var e=this;window.baf=this.state;var t=this.state,c=t.squaresArr,a=t.attempts,n=t.record,r=t.level,s=n?"".concat(n," \u0443\u0440\u043e\u0432\u0435\u043d\u044c"):"\u0440\u0435\u043a\u043e\u0440\u0434 \u0435\u0449\u0435 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d!",i=this.props.clickHandler,l=60*c.length/Math.sqrt(c.length),u=c.map((function(t,c){return Object(b.jsx)(f,{clickHandler:e.handleClick,checked:t.checked,id:t.id},c)}));return Object(b.jsxs)("div",{className:"square",children:[Object(b.jsx)("button",{onClick:i,"data-type":"menu",className:"menu__btn menu__btn_game",children:"\u0412\u044b\u0439\u0442\u0438 \u0432 \u043c\u0435\u043d\u044e"}),Object(b.jsxs)("div",{className:"square__info",children:[Object(b.jsxs)("h1",{style:n?{color:"darkorange"}:{color:"white"},children:["\u0422\u0432\u043e\u0439 \u0440\u0435\u043a\u043e\u0440\u0434: ",s]}),Object(b.jsxs)("p",{children:["\u0423\u0440\u043e\u0432\u0435\u043d\u044c: ",r-1]}),Object(b.jsxs)("p",{children:["\u041f\u043e\u043f\u044b\u0442\u043e\u043a: ",a]})]}),Object(b.jsx)("div",{className:"square__field",children:Object(b.jsx)("div",{style:{maxWidth:l||""},className:"square__field-wrapper",children:u})})]})}}]),c}(n.a.Component),v=c.p+"static/media/redBackground.b1cc509c.jpg",g=(c(28),function(e){var t=e.clickHandler,c=localStorage.getItem("level");return Object(b.jsxs)("div",{className:"menu",children:[c?Object(b.jsx)("button",{"data-type":"resume",onClick:t,className:"menu__btn",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}):"",Object(b.jsx)("button",{"data-type":"new",onClick:t,className:"menu__btn",children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"}),Object(b.jsxs)("button",{onClick:t,className:"menu__btn",children:["\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 ",Object(b.jsx)("span",{style:{color:"red"},children:"(\u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435)"})]})]})}),k=c(15);var p=function(){var e=Object(a.useState)(!0),t=Object(i.a)(e,2),c=t[0],n=t[1],r=function(e){switch(e.target.dataset.type){case"resume":n(!1);break;case"menu":n(!0);break;case"new":localStorage.removeItem("level"),n(!1)}};return Object(b.jsx)(k.a,{children:Object(b.jsx)("div",{style:{backgroundImage:"url(".concat(v,")")},className:"App",children:c?Object(b.jsx)(g,{clickHandler:r}):Object(b.jsx)(O,{clickHandler:r})})})};s.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.59a95b93.chunk.js.map